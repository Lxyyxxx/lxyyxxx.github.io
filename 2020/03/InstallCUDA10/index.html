<!-- 不变的布局 -->
<!DOCTYPE html>
<html>
<!-- head -->

<head><meta name="generator" content="Hexo 3.9.0">
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    

    <title>
        
        在 Windows 10 上安装 CUDA 10.0 - Lin Xinyu
        
    </title>

    <!-- theme css -->
    <link rel="stylesheet" href="/css/write.css">

    <!-- tocbot -->
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/tocbot/4.4.2/tocbot.css">

    <!-- katex -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">

    <!-- bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <!-- highlight -->
    <link href="https://fonts.googleapis.com/css?family=Fira+Code&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/highlight.js/9.18.1/styles/xcode.min.css">

    <!-- font awesome -->
    <link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.13.0/css/all.min.css" rel="stylesheet">

    <!-- font -->
    <link href="https://fonts.googleapis.com/css?family=Comic+Neue|Schoolbell&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Noto+Serif+SC:400,700,900&display=swap" rel="stylesheet">

    <script src="/js/search.js"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="write-wrapper">
        <!-- 顶部导航栏 -->
<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm" id="write-navbar-parent">
    <div class="container">
        <div class="navbar-brand">
            <a href="/" class="write-logo">Lin Xinyu</a>
        </div>
        <div class="write-collapse-button">
            <a role="button" data-toggle="collapse" href="#write-collapse-navbar" data-parent="#write-navbar-parent">
                <i class="fas fa-bars"></i>
            </a>
        </div>
        <div class="collapse navbar-collapse in" id="write-collapse-navbar">
            <ul class="navbar-nav font-weight-bold">
                <!-- 顶部导航栏 -->
                
                <li class="nav-item">
                    <a href="/" class="nav-link">
                        首页
                    </a>
                </li>
                
                <li class="nav-item">
                    <a href="/archives" class="nav-link">
                        归档
                    </a>
                </li>
                
                <li class="nav-item">
                    <a href="/categories" class="nav-link">
                        分类
                    </a>
                </li>
                
                <li class="nav-item">
                    <a href="/tags" class="nav-link">
                        标签
                    </a>
                </li>
                
            </ul>
            <div class="write-search">
                <a role="button" class="popup-trigger">
                    <i class="fas fa-search"></i>
                </a>
            </div>
            <div class="write-rss">
                <a role="button" href="/atom.xml" target="_blank">
                    <i class="fas fa-rss"></i>
                </a>
            </div>
        </div>
    </div>
</nav>
<div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
            <span class="search-icon">
                <i class="fa fa-search"></i>
            </span>
            <div class="search-input-container">
                <input autocomplete="off" autocapitalize="off" placeholder="搜索中..."
                    spellcheck="false" type="search" class="search-input">
            </div>
            <span class="popup-btn-close">
                <i class="fa fa-times-circle"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>
<br />
        <!-- 文章 -->
<div class="container-fluid">
    <div class="row">
        <div class="d-none d-xl-block col-xl-2"></div>
        <div class="col-md-9 col-xl-6 pl-md-5">
            <div class="card border-0 shadow">
                <div class="card-body">
                    <div class="write-title">
                        <h2 class="write-post-title">在 Windows 10 上安装 CUDA 10.0</h2>
                    </div>
                    <div class="write-meta">
                        <div class="write-post-time">
                            <!-- 如果更新时间大于发布时间则显示更新时间 -->
                            
                            <!-- update time -->
                            Updated at
                            <time datetime="2022-10-09T13:59:04.000Z" itemprop="dateModified">
                            2022-10-09 21:59
                            </time>
                            
                        </div>
                        <!-- categories -->
                        
                        
                        <i class="fas fa-folder"></i>
                        
                        <a
                            href='/categories/没有官方文档重要的教程/'>没有官方文档重要的教程</a>
                        
                        
                        &emsp;
                        <!-- tags -->
                        
                        
                        <i class="fas fa-tags"></i>
                        
                        <a
                            href='/tags/CUDA-10-0/'>CUDA 10.0</a>, 
                        
                        <a
                            href='/tags/nVidia/'>nVidia</a>, 
                        
                        <a
                            href='/tags/Windows-10/'>Windows 10</a>, 
                        
                        <a
                            href='/tags/OpenGL/'>OpenGL</a>
                        
                        
                    </div>
                    <article class="write-content">
                        <p>因为有<a href="https://docs.nvidia.com/cuda/archive/10.0/cuda-installation-guide-microsoft-windows/index.html" target="_blank" rel="noopener">官方文档</a>了，所以就记录一点和文档不一样的地方</p>
<h1 id="验证安装"><a class="header-anchor" href="#验证安装"># </a>验证安装</h1>
<p><code>deviceQuery.exe</code>和<code>bandwidthTest.exe</code>的地址我的是在<code>NVIDIA GPU Computing Toolkit\CUDA\v10.0\extras\demo_suite</code></p>
<h1 id="在-Visual-Studio-2019-中运行-CUDA-项目"><a class="header-anchor" href="#在-Visual-Studio-2019-中运行-CUDA-项目"># </a>在 Visual Studio 2019 中运行 CUDA 项目</h1>
<p>因为时间的原因，在 CUDA 10.0 发布的时候并没有 Visual Studio 2019 这个东西，所以它给的示例工程只到了 Visual Studio 2017 版本，直接运行会报错，提示找不到<code>CUDA 10.0.props</code>这个文件<br>
经过一阵查找，我找到了它在<code>C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v10.0\extras\visual_studio_integration\MSBuildExtensions</code>，尽管我的<code>CUDA</code>安装在了D盘<br>
这时候我们只需要将<code>CUDA 10.0.props</code>以及和它在一个文件夹里的文件复制到报错的那个文件夹里就行了<br>
现在可以打开解决方案了，会提示<code>若要使用 Visual Studio 2019 (v142) 生成工具进行生成，请单击&quot;项目&quot;菜单或右键单击解决方案，然后选择&quot;重定向解决方案...&quot;。安装 Visual Studio 2017 (v141) 可使用 Visual Studio 2017 (v141) 生成工具进行生成。</code><br>
如果我们使用 Visual Studio 2019 (v142) 进行生成，会报错<code>#error:  -- unsupported Microsoft Visual Studio version! Only the versions between 2013 and 2017 (inclusive) are supported!</code>，所以我们应该安装 Visual Studio 2017 (v141)，然后在属性集中把<strong>平台工具集</strong>修改为 Visual Studio 2017 (v141)</p>
<h1 id="OpenGL-的安装"><a class="header-anchor" href="#OpenGL-的安装"># </a>OpenGL 的安装</h1>
<p>在翻 CUDA 的文件夹的时候发现了 freeglut 和 glew，那就顺便安装一下 OpenGL 好了。我的 C++ IDE 是 JetBrains 的 CLion，采用 MinGW-w64 环境<br>
首先先找到 freeglut 和 glew 的 <code>.h</code> <code>.lib</code> <code>.dll</code> 的位置<br>
我的<code>.h</code>文件在<code>NVIDIA GPU Computing Toolkit/CUDA Samples/v10.0/common/inc/GL</code>，<code>.lib</code>文件在<code>NVIDIA GPU Computing Toolkit\CUDA Samples\v10.0\common\lib\x64</code>，<code>.dll</code>在<code>NVIDIA GPU Computing Toolkit\CUDA Samples\v10.0\bin\win64\Release</code>和<code>NVIDIA GPU Computing Toolkit\CUDA\v10.0\extras\demo_suite</code>下都有，但它们大小是一样的，随便选择就行了<br>
把<code>.dll</code>移动到<code>C:\Windows\System32</code>和<code>C:\Windows\SysWOW64</code>下<br>
因为<code>NVIDIA GPU Computing Toolkit</code>路径中含有空格，在 CMakeLists.txt 中<code>link_directories</code>和<code>include_directories</code>引入时需要将空格转义<code>\ </code></p>
<pre><code class="language-cmake">link_directories(D:/Program/NVIDIA\ GPU\ Computing\ Toolkit/CUDA\ Samples/v10.0/common/lib/x64)
include_directories(D:/Program/NVIDIA\ GPU\ Computing\ Toolkit/CUDA/v10.0/extras/CUPTI/include)
include_directories(D:/Program/NVIDIA\ GPU\ Computing\ Toolkit/CUDA\ Samples/v10.0/common/inc)
</code></pre>
<p>然后添加需要编译的 cpp，并和<code>.lib</code>链接起来</p>
<pre><code class="language-cmake">add_executable(YOUR_PROJECT_NAME main.cpp)
target_link_libraries(YOUR_PROJECT_NAME -lopengl32 -lglu32 freeglut.lib glew64.lib)
</code></pre>
<blockquote>
<p>这里的<code>opengl32</code>和<code>glu32</code>是必要的，不然会报错</p>
</blockquote>
<p>运行后，我的程序出现了报错，<code>#include&lt;GL/gl.h&gt;</code>出错了，因为有<code>freeglut.h</code>的文件夹中并没有<code>gl.h</code>和<code>glu.h</code>，我在<code>NVIDIA GPU Computing Toolkit\CUDA\v10.0\extras\CUPTI\include\GL</code>中找到了这两个文件，将他们移动到了<code>D:\Tool\mingw64\include\GL</code>中，再次运行就没有报错了<br>
附上一个测试程序，这个是我上计算机图形学时配 OpenGL 自动生成的示例程序</p>
<pre><code class="language-cpp">/*
 * GLUT Shapes Demo
 *
 * Written by Nigel Stewart November 2003
 *
 * This program is test harness for the sphere, cone
 * and torus shapes in GLUT.
 *
 * Spinning wireframe and smooth shaded shapes are
 * displayed until the ESC or q key is pressed.  The
 * number of geometry stacks and slices can be adjusted
 * using the + and - keys.
 */

/* 这里使用freeglut.h，而不是glut.h */
#include &lt;GL/freeglut.h&gt;

#include &lt;stdlib.h&gt;

static int slices = 16;
static int stacks = 16;

/* GLUT callback Handlers */

static void resize(int width, int height)
{
    const float ar = (float) width / (float) height;

    glViewport(0, 0, width, height);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glFrustum(-ar, ar, -1.0, 1.0, 2.0, 100.0);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity() ;
}

static void display(void)
{
    const double t = glutGet(GLUT_ELAPSED_TIME) / 1000.0;
    const double a = t*90.0;

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glColor3d(1,0,0);

    glPushMatrix();
        glTranslated(-2.4,1.2,-6);
        glRotated(60,1,0,0);
        glRotated(a,0,0,1);
        glutSolidSphere(1,slices,stacks);
    glPopMatrix();

    glPushMatrix();
        glTranslated(0,1.2,-6);
        glRotated(60,1,0,0);
        glRotated(a,0,0,1);
        glutSolidCone(1,1,slices,stacks);
    glPopMatrix();

    glPushMatrix();
        glTranslated(2.4,1.2,-6);
        glRotated(60,1,0,0);
        glRotated(a,0,0,1);
        glutSolidTorus(0.2,0.8,slices,stacks);
    glPopMatrix();

    glPushMatrix();
        glTranslated(-2.4,-1.2,-6);
        glRotated(60,1,0,0);
        glRotated(a,0,0,1);
        glutWireSphere(1,slices,stacks);
    glPopMatrix();

    glPushMatrix();
        glTranslated(0,-1.2,-6);
        glRotated(60,1,0,0);
        glRotated(a,0,0,1);
        glutWireCone(1,1,slices,stacks);
    glPopMatrix();

    glPushMatrix();
        glTranslated(2.4,-1.2,-6);
        glRotated(60,1,0,0);
        glRotated(a,0,0,1);
        glutWireTorus(0.2,0.8,slices,stacks);
    glPopMatrix();

    glutSwapBuffers();
}


static void key(unsigned char key, int x, int y)
{
    switch (key)
    {
        case 27 :
        case 'q':
            exit(0);
            break;

        case '+':
            slices++;
            stacks++;
            break;

        case '-':
            if (slices&gt;3 &amp;&amp; stacks&gt;3)
            {
                slices--;
                stacks--;
            }
            break;
    }

    glutPostRedisplay();
}

static void idle(void)
{
    glutPostRedisplay();
}

const GLfloat light_ambient[]  = { 0.0f, 0.0f, 0.0f, 1.0f };
const GLfloat light_diffuse[]  = { 1.0f, 1.0f, 1.0f, 1.0f };
const GLfloat light_specular[] = { 1.0f, 1.0f, 1.0f, 1.0f };
const GLfloat light_position[] = { 2.0f, 5.0f, 5.0f, 0.0f };

const GLfloat mat_ambient[]    = { 0.7f, 0.7f, 0.7f, 1.0f };
const GLfloat mat_diffuse[]    = { 0.8f, 0.8f, 0.8f, 1.0f };
const GLfloat mat_specular[]   = { 1.0f, 1.0f, 1.0f, 1.0f };
const GLfloat high_shininess[] = { 100.0f };

/* Program entry point */

int main(int argc, char *argv[])
{
    glutInit(&amp;argc, argv);
    glutInitWindowSize(640,480);
    glutInitWindowPosition(10,10);
    glutInitDisplayMode(GLUT_RGB | GLUT_DOUBLE | GLUT_DEPTH);

    glutCreateWindow(&quot;GLUT Shapes&quot;);

    glutReshapeFunc(resize);
    glutDisplayFunc(display);
    glutKeyboardFunc(key);
    glutIdleFunc(idle);

    glClearColor(1,1,1,1);
    glEnable(GL_CULL_FACE);
    glCullFace(GL_BACK);

    glEnable(GL_DEPTH_TEST);
    glDepthFunc(GL_LESS);

    glEnable(GL_LIGHT0);
    glEnable(GL_NORMALIZE);
    glEnable(GL_COLOR_MATERIAL);
    glEnable(GL_LIGHTING);

    glLightfv(GL_LIGHT0, GL_AMBIENT,  light_ambient);
    glLightfv(GL_LIGHT0, GL_DIFFUSE,  light_diffuse);
    glLightfv(GL_LIGHT0, GL_SPECULAR, light_specular);
    glLightfv(GL_LIGHT0, GL_POSITION, light_position);

    glMaterialfv(GL_FRONT, GL_AMBIENT,   mat_ambient);
    glMaterialfv(GL_FRONT, GL_DIFFUSE,   mat_diffuse);
    glMaterialfv(GL_FRONT, GL_SPECULAR,  mat_specular);
    glMaterialfv(GL_FRONT, GL_SHININESS, high_shininess);

    glutMainLoop();

    return EXIT_SUCCESS;
}
</code></pre>

                    </article>
                    <!-- ccmark -->
                    <br />
                    <div align="right" class="ccmark">
                        <i class="fab fa-creative-commons"></i>
                        <i class="fab fa-creative-commons-by"></i>
                        <i class="fab fa-creative-commons-sa"></i>
                    </div>
                    <hr />
<div class="write-paginator">
    <div class="contain-fluid">
        
        <div class="row justify-content-between mx-0">
            
            <a class="write-prev-post col-5 text-left" href="/2020/03/LeetcodeMultithreading/">
                <i class="fa fa-angle-left"></i>&emsp;「LeetCode」多线程
            </a>
            
            
            <a class="write-next-post col-5 text-right" href="/2020/02/BeautifyWindowsTerminal/">
                一份 Windows Terminal 配置笔记&emsp;<i class="fa fa-angle-right"></i>
            </a>
            
        </div>
        
    </div>
</div>
                </div>
            </div>
        </div>
        <div class="col-md-3 col-xl-4">
    <!-- toc -->
    <div class="write-toc"></div>
</div>
    </div>
</div>
        <footer class="write-footer w-100">
    <a href="https://hexo.io/" class="write-blog-link" target="_blank">Hexo</a> Theme Write by <a
        href="https://lxyyxxx.github.io/" class="write-blog-link" target="_blank">Lin Xinyu</a>
    <br>
    &copy; 2023 <a href="https://lxyyxxx.github.io" class="write-blog-link">
            Lin Xinyu
        </a>
</footer>
    </div>
    <!-- bootstrap -->
<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.slim.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
    integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
    crossorigin="anonymous"></script>

<!-- tocbot -->
<script src="https://cdn.bootcdn.net/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script>

<!-- mermaid -->
<script async src="https://unpkg.com/mermaid@8.6.0/dist/mermaid.min.js"></script>

<!-- highlight js-->
<script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/9.18.1/highlight.min.js">
</script>
<!-- uncommon highlight -->
<script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/9.18.1/languages/matlab.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/9.18.1/languages/cmake.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/9.18.1/languages/x86asm.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/9.18.1/languages/powershell.min.js"></script>

<!-- theme js -->
<script src="/js/write.js"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>

</html>